.. _doc_scenes_and_nodes:

场景(Scene)与节点(Node)
================

简介
------------

.. image:: /img/chef.png

先设想有那么一瞬间你自己不再是一名游戏开发者了，而是一名大厨！
你的装备换成了一套大厨的制服。不要考虑制作游戏的事情，你现在的职责是为你的顾客创建新的可口的食谱。

那么，大厨是怎样创建食谱的呢？食谱分为两部分：首先是食材；然后是工序。这样，任何人都可以根据食谱烹调并品尝到你华丽的创作。

Godot中制作游戏与这个过程非常相似。Godot引擎就像一个厨房，在这个厨房里，*节点*就像装满新鲜食材的冰箱。

节点有很多种类型，显示图片的、播放声音的、显示三维模型的，等等。总共有几十个。

节点
-----

让我们从基础谈起。节点是创建游戏的最基础的元素，它具有以下一些特征：

-  名称
-  可编辑的属性
-  能接收回调，以便处理每帧(Frame)相关效果
-  可以被扩展，以便拥有更多功能
-  可以被添加为其它节点的子节点

.. image:: /img/tree.png

最后一点非常重要：节点能让其它节点作为子节点。这样组合出来，就变成了我们常说的**树**状。

Godot中这种树状组织能力创建了一种强大的项目管理工具。由于不同的节点有不同的功能，通过组合它们就足以创建更复杂的功能。

这样讲你肯定还没有什么感觉，但Godot所有的知识点都与上面这些特征有关，你现在只要记住有节点这么个概念，并且节点能按树状组合就好了。

场景
------

.. image:: /img/scene_tree_example.png

有了节点的概念后，下一步就是要给你解释什么是场景了。

场景就是由一组按树状层级结构组织的节点组成。它有下列属性：

-  一个场景只有一个根节点
-  场景可以被保存到硬盘上并被加载回来
-  场景可被*实例化* (稍后会有更多描述)
-  运行一款游戏意味着在运行一个场景
-  一个项目中可以有多个场景，但启动时必须指定其中一个用于初始加载的场景

Godot编辑器其实就是一个**场景编辑器**。它有丰富的用于编辑二维和三维场景的相关工具，这些工具都是围绕编辑节点和场景的概念的。

创建项目
----------------------

光讲理论很无聊了吧，那让我们来点实践性的：搞个“Hello world”来用一下编辑器。

当没有启动具体项目时，Godot会打开项目管理器，用于帮助开发者管理项目。

.. image:: /img/project_manager.png

点"New Project"创建新项目，这个时候需要选择项目路径并指定项目名称：

.. image:: /img/create_new_project.png

编辑器
------

创建好新项目后，下一步就是打开它，这样就启动了Godot编辑器。编辑器的效果大致是这样：

.. image:: /img/empty_editor.png

上面提过，在Godot中制作游戏就像到了厨房，先打开冰箱，然后添加一些新鲜的节点到项目中。让我们开始“Hello World”吧，点击"New Node"按钮：

.. image:: /img/newnode_button.png

打开“Create Node”对话框，界面显示了一长列可用节点吧：

.. image:: /img/node_classes.png

先选择“Label”节点，可以在上方快速搜索：

.. image:: /img/node_search_label.png

最后，创建标签！“Create”按钮被点击后，会发生很多事情：

.. image:: /img/editor_with_label.png

首先，场景变成2D编辑器，因为Label是个二维节点，Label会出现左上角、被选中状态。

同时，该节点出现在场景树编辑器,标签属性则出现在Inspector。

下面，我们来修改该标签的“Text”属性，改成"Hello, World!"：

.. image:: /img/hw.png

好了，这样就可以运行场景了！点击顶部栏的播放场景的按钮或按F6：

.. image:: /img/playscene.png

哎呀... 

.. image:: /img/neversaved.png

提示场景需要保存了才能运行；保存场景，文件名比如叫做 hello.scn：

.. image:: /img/save_scene.png

该场景只允许保存在该项目中。项目的根"res://"代表资源路径。

保存场景后再点“运行场景”，“Hello, World!”这个demo应该就开始执行了：

.. image:: /img/helloworld.png

搞定!

.. _doc_scenes_and_nodes-configuring_the_project:

配置项目
-----------------------

项目中，如果有多个场景，必须指定一个主场景 - 在运行时初始被加入的。

这些设置都被保存在engine.cfg中，这是一种win.ini这样的纯文本格式，编辑起来很简单。因为项目设置项很多，所以可以通过“项目设置”对话框来直观操作。

通过菜单Scene -> Project Settings可以访问该对话框。

该窗口被打开时，要选择主场景，很简单，切换到application/main_scene属性，选择'hello.scn'即可。

.. image:: /img/main_scene.png

完成设置后，点“运行按钮”或F5键会开始运行该项目。

再打开项目设置对话框，其中显示了很多可用选项及默认值。如果默认值没问题的话就不需要动它。

当其中一项值被改动，其名称左侧会出现一个标记，代表该值将会保存到engine.cfg文件中。

其实还可以添加自定义配置选项并在运行时被读入
:ref:`Globals <class_Globals>` 单例对象中.

未完待续...
------------------

下一节会涉及多个场景及多个节点！